<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Numberblocks 1–30</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="stage" id="stage"></div>

    <script>
      // Config-driven Numberblocks definitions
      // - color: base color (legs, arms, label, default blocks)
      // - layout: rows bottom-to-top, each = block count
      // - align: { rowIdx: 'start'|'end'|'center' } row alignment overrides
      // - blocks: omit = all use color, 'white' = all white+border,
      //           2D array = per-block ('W' = white+border, null = base color, string = that color)
      const W = "W"; // white + border (like 10)
      const B = "#f7dea9"; // beige (like 20)
      const H = "H"; // hole (transparent)

      const NUMBERS = {
        1: {
          color: "#E54B4B",
          layout: [1],
        },
        2: {
          color: "#F5A623",
          layout: [1, 1],
        },
        3: {
          color: "#F7DC6F",
          layout: [1, 1, 1],
        },
        4: {
          color: "#27AE60",
          layout: [2, 2],
        },
        5: {
          color: "#3498DB",
          layout: [2, 2, 1],
          align: { 2: "end" },
        },
        6: {
          color: "#8E44AD",
          layout: [2, 2, 2],
        },
        7: {
          color: "#E67E22",
          layout: [1, 1, 1, 1, 1, 1, 1],
          blocks: [
            ["#E54B4B"],
            ["#F5A623"],
            ["#F7DC6F"],
            ["#27AE60"],
            ["#3498DB"],
            ["#6C5CE7"],
            ["#8E44AD"],
          ],
        },
        8: {
          color: "#E91E8C",
          layout: [2, 2, 2, 2],
        },
        9: {
          color: "#2C3E50",
          layout: [3, 3, 3],
          blocks: [
            ["#B0B0B0", "#B0B0B0", "#B0B0B0"],
            ["#808080", "#808080", "#808080"],
            ["#404040", "#404040", "#404040"],
          ],
        },
        10: {
          color: "#E74C3C",
          layout: [2, 2, 2, 2, 2],
          blocks: "white",
        },
        11: {
          color: "#E54B4B",
          layout: [2, 2, 2, 2, 2, 1],
          align: { 5: "start" },
          blocks: [[W, W], [W, W], [W, W], [W, W], [W, W], ["#E54B4B"]],
        },
        12: {
          color: "#F5A623",
          layout: [3, 3, 3, 3],
          blocks: [
            [W, W, W],
            [W, "#F5A623", W],
            [W, "#F5A623", W],
            [W, W, W],
          ],
        },
        13: {
          color: "#F7DC6F",
          layout: [2, 2, 2, 2, 3, 2],
          align: { 0: "start", 1: "start", 2: "start", 3: "start", 5: "end" },
          blocks: [
            [W, W],
            [W, W],
            [W, W],
            [W, W],
            [W, W, "#F7DC6F"],
            ["#F7DC6F", "#F7DC6F"],
          ],
        },
        14: {
          color: "#27AE60",
          layout: [2, 2, 2, 2, 2, 2, 2],
          blocks: [
            [W, W],
            [W, W],
            [W, W],
            [W, W],
            [W, W],
            ["#27AE60", "#27AE60"],
            ["#27AE60", "#27AE60"],
          ],
        },
        15: {
          color: "#3498DB",
          layout: [5, 4, 3, 2, 1],
          align: { 0: "end", 1: "end", 2: "end", 3: "end", 4: "end" },
          blocks: [
            [W, W, W, W, "#3498DB"],
            [W, W, W, "#3498DB"],
            [W, W, "#3498DB"],
            [W, "#3498DB"],
            ["#3498DB"],
          ],
        },
        16: {
          color: "#8E44AD",
          layout: [4, 4, 4, 4],
          blocks: [
            ["#8E44AD", "#8E44AD", "#8E44AD", "#8E44AD"],
            [W, "#8E44AD", "#8E44AD", W],
            [W, W, W, W],
            [W, W, W, W],
          ],
        },
        17: {
          color: "#E91E63",
          layout: [2, 2, 2, 3, 3, 4, 1],
          align: { 3: "start", 4: "start", 6: "end" },
          blocks: [
            [W, W],
            [W, W],
            [W, W],
            ["#E54B4B", W, W],
            ["#F5A623", W, W],
            ["#F7DC6F", "#27AE60", "#3498DB", "#6C5CE7"],
            ["#8E44AD"],
          ],
        },
        18: {
          color: "#D35400",
          layout: [3, 3, 3, 3, 3, 3],
          blocks: [
            ["#E91E8C", "#E91E8C", "#E91E8C"],
            [W, W, "#E91E8C"],
            [W, W, "#E91E8C"],
            [W, W, "#E91E8C"],
            [W, W, "#E91E8C"],
            [W, W, "#E91E8C"],
          ],
        },
        19: {
          color: "#1ABC9C",
          layout: [6, 6, 6, 1],
          align: { 3: "start" },
          blocks: [
            [W, W, W, W, W, W],
            [W, W, W, W, "#808080", "#808080"],
            ["#808080", "#808080", "#808080", "#808080", "#808080", "#808080"],
            ["#808080"],
          ],
        },
        20: {
          color: "#f7dea9",
          layout: [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
        },
        // 21-30: initial guesses — Q will correct
        // 21-29: first 20 blocks = beige (like 20), rest = digit color
        21: {
          color: "#E54B4B",
          layout: [3, 3, 3, 3, 3, 3, 3],
          blocks: [
            [B, B, B],
            [B, B, B],
            [B, B, B],
            [B, "#E54B4B", B],
            [B, B, B],
            [B, B, B],
            [B, B, B],
          ],
        },
        22: {
          color: "#F5A623",
          layout: [4, 4, 4, 4, 4, 2],
          blocks: [
            [B, B, B, B],
            [B, B, B, B],
            [B, B, B, B],
            [B, B, B, B],
            [B, B, B, B],
            ["#F5A623", "#F5A623"],
          ],
        },
        23: {
          color: "#F7DC6F",
          layout: [5, 5, 5, 4, 4],
          align: { 3: "start", 4: "start" },
          blocks: [
            [B, B, B, B, "#F7DC6F"],
            [B, B, B, B, "#F7DC6F"],
            [B, B, B, B, "#F7DC6F"],
            [B, B, B, B],
            [B, B, B, B],
          ],
        },
        24: {
          color: "#27AE60",
          layout: [3, 3, 3, 3, 3, 3, 3, 3],
          blocks: [
            [B, B, B],
            [B, B, B],
            [B, "#27AE60", B],
            [B, "#27AE60", B],
            [B, "#27AE60", B],
            [B, "#27AE60", B],
            [B, B, B],
            [B, B, B],
          ],
        },
        25: {
          color: "#3498DB",
          layout: [5, 5, 5, 5, 5],
          blocks: [
            ["#3498DB", "#3498DB", "#3498DB", "#3498DB", "#3498DB"],
            [B, B, B, B, B],
            [B, B, B, B, B],
            [B, B, B, B, B],
            [B, B, B, B, B],
          ],
        },
        26: {
          color: "#8E44AD",
          layout: [4, 4, 4, 4, 4, 4, 2],
          blocks: [
            ["#8E44AD", "#8E44AD", "#8E44AD", "#8E44AD"],
            ["#8E44AD", B, B, "#8E44AD"],
            [B, B, B, B],
            [B, B, B, B],
            [B, B, B, B],
            [B, B, B, B],
            [B, B],
          ],
        },
        27: {
          color: "#E67E22",
          layout: [3, 3, 3, 3, 3, 3, 3, 3, 3],
          blocks: [
            [B, B, B],
            [B, "#E54B4B", B],
            [B, "#F5A623", B],
            [B, "#F7DC6F", B],
            [B, "#27AE60", B],
            [B, "#3498DB", B],
            [B, "#6C5CE7", B],
            [B, "#8E44AD", B],
            [B, B, B],
          ],
        },
        28: {
          color: "#E91E8C",
          layout: [3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
          blocks: [
            [B, B, B],
            [B, H, B],
            [B, B, B],
            [B, H, B],
            [B, B, B],
            [B, H, B],
            [B, B, B],
            [B, H, B],
            ["#E91E8C", "#E91E8C", "#E91E8C"],
            ["#E91E8C", H, "#E91E8C"],
            ["#E91E8C", "#E91E8C", "#E91E8C"],
          ],
        },
        29: {
          color: "#2C3E50",
          layout: [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
          align: { 9: "start" },
          blocks: [
            [B, B, "#B0B0B0"],
            [B, B, "#B0B0B0"],
            [B, B, "#B0B0B0"],
            [B, B, "#808080"],
            [B, B, "#808080"],
            [B, B, "#808080"],
            [B, B, "#404040"],
            [B, B, "#404040"],
            [B, B, "#404040"],
            [B, B],
          ],
        },
        30: {
          color: "#fefab4",
          layout: [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
        },
      };

      function createBlock(color, hasFace, isWhite) {
        const block = document.createElement("div");
        block.className = "block";
        block.style.setProperty("--color", color);

        if (isWhite) {
          block.style.border = "2px solid #ddd";
        }

        if (hasFace) {
          block.innerHTML = `
          <div class="face">
            <div class="eyes">
              <div class="eye"></div>
              <div class="eye"></div>
            </div>
            <div class="mouth"></div>
          </div>
        `;
        }
        return block;
      }

      function createNumberblock(n) {
        const cfg = NUMBERS[n];
        if (!cfg) return null;

        const { color, layout, align = {}, blocks } = cfg;
        const container = document.createElement("div");
        container.className = "numberblock";
        container.style.setProperty("--color", color);

        // Arms
        const limbs = document.createElement("div");
        limbs.className = "limbs";
        limbs.innerHTML = `
        <div class="arm arm-left" style="--color: ${color}"></div>
        <div class="arm arm-right" style="--color: ${color}"></div>
      `;

        // Body
        const body = document.createElement("div");
        body.className = "body";

        layout.forEach((count, rowIdx) => {
          const row = document.createElement("div");
          row.className = "row";

          // Apply alignment from config
          if (align[rowIdx]) {
            const a = align[rowIdx];
            row.style.justifyContent =
              a === "start" ? "flex-start" : a === "end" ? "flex-end" : a;
          }

          for (let i = 0; i < count; i++) {
            const isTopRow = rowIdx === layout.length - 1;
            const isCenterBlock =
              (count === 1 && i === 0) ||
              (count === 2 && i === 0) ||
              (count === 3 && i === 1) ||
              (count === 4 && i === 1) ||
              (count === 5 && i === 2) ||
              (count === 6 && i === 2);
            const hasFace = isTopRow && isCenterBlock;

            // Determine block color
            let blockColor = color;
            let isWhite = false;

            let isHole = false;

            if (blocks === "white") {
              blockColor = "#FFFFFF";
              isWhite = true;
            } else if (Array.isArray(blocks) && blocks[rowIdx]) {
              const cellVal = blocks[rowIdx][i];
              if (cellVal === W) {
                blockColor = "#FFFFFF";
                isWhite = true;
              } else if (cellVal === H) {
                isHole = true;
              } else if (cellVal != null) {
                blockColor = cellVal;
              }
            }

            const block = createBlock(blockColor, hasFace, isWhite);
            if (isHole) block.style.opacity = "0";
            row.appendChild(block);
          }

          body.appendChild(row);
        });

        // Position arms
        const bodyWidth = Math.max(...layout) * 52;
        limbs.style.width = bodyWidth + "px";
        const armTop = layout.length * 52;
        limbs.querySelector(".arm-left").style.top = `-${armTop - 10}px`;
        limbs.querySelector(".arm-right").style.top = `-${armTop - 10}px`;

        container.appendChild(body);
        container.appendChild(limbs);

        // Legs
        const legs = document.createElement("div");
        legs.className = "legs";
        legs.innerHTML = `
        <div class="leg" style="--color: ${color}"><div class="foot" style="--color: ${color}"></div></div>
        <div class="leg" style="--color: ${color}"><div class="foot" style="--color: ${color}"></div></div>
      `;
        container.appendChild(legs);

        // Label
        const label = document.createElement("div");
        label.className = "label";
        label.textContent = n;
        container.appendChild(label);

        // Click to wave
        container.addEventListener("click", () => {
          container.classList.remove("wave");
          void container.offsetWidth;
          container.classList.add("wave");
        });

        return container;
      }

      // Render all
      const stage = document.getElementById("stage");
      for (let n = 1; n <= 30; n++) {
        stage.appendChild(createNumberblock(n));
      }
    </script>
  </body>
</html>
